!function(){"use strict";function e(e){return Array.isArray?Array.isArray(e):"[object Array]"===c(e)}function t(e){return"string"==typeof e}function n(e){return"number"==typeof e}function r(e){return!0===e||!1===e||function(e){return i(e)&&null!==e}(e)&&"[object Boolean]"==c(e)}function i(e){return"object"==typeof e}function s(e){return null!=e}function o(e){return!e.trim().length}function c(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const h=Object.prototype.hasOwnProperty;class a{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=l(e);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function l(n){let r=null,i=null,s=null,o=1;if(t(n)||e(n))s=n,r=d(n),i=u(n);else{if(!h.call(n,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const e=n.name;if(s=e,h.call(n,"weight")&&(o=n.weight,o<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(e));r=d(e),i=u(e)}return{path:r,id:i,weight:o,src:s}}function d(t){return e(t)?t:t.split(".")}function u(t){return e(t)?t.join("."):t}var f={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(i,o){let c=[],h=!1;const a=(i,o,l)=>{if(s(i))if(o[l]){const d=i[o[l]];if(!s(d))return;if(l===o.length-1&&(t(d)||n(d)||r(d)))c.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(d));else if(e(d)){h=!0;for(let e=0,t=d.length;e<t;e+=1)a(d[e],o,l+1)}else o.length&&a(d,o,l+1)}else c.push(i)};return a(i,t(o)?o.split("."):o,0),h?c:c[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const p=/[^ ]+/g;class g{constructor({getFn:e=f.getFn,fieldNormWeight:t=f.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(t){const i=t.match(p).length;if(n.has(i))return n.get(i);const s=1/Math.pow(i,.5*e),o=parseFloat(Math.round(s*r)/r);return n.set(i,o),o},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,t(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const n=this.size();t(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!s(e)||o(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(n,r){let i={i:r,$:{}};this.keys.forEach(((r,c)=>{let h=this.getFn(n,r.path);if(s(h))if(e(h)){let n=[];const r=[{nestedArrIndex:-1,value:h}];for(;r.length;){const{nestedArrIndex:i,value:c}=r.pop();if(s(c))if(t(c)&&!o(c)){let e={v:c,i:i,n:this.norm.get(c)};n.push(e)}else e(c)&&c.forEach(((e,t)=>{r.push({nestedArrIndex:t,value:e})}))}i.$[c]=n}else if(!o(h)){let e={v:h,n:this.norm.get(h)};i.$[c]=e}})),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function m(e,t,{getFn:n=f.getFn,fieldNormWeight:r=f.fieldNormWeight}={}){const i=new g({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(l)),i.setSources(t),i.create(),i}function y(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=f.distance,ignoreLocation:s=f.ignoreLocation}={}){const o=t/e.length;if(s)return o;const c=Math.abs(r-n);return i?o+c/i:c?1:o}const v=32;function M(e,t,n,{location:r=f.location,distance:i=f.distance,threshold:s=f.threshold,findAllMatches:o=f.findAllMatches,minMatchCharLength:c=f.minMatchCharLength,includeMatches:h=f.includeMatches,ignoreLocation:a=f.ignoreLocation}={}){if(t.length>v)throw new Error(`Pattern length exceeds max of ${v}.`);const l=t.length,d=e.length,u=Math.max(0,Math.min(r,d));let p=s,g=u;const m=c>1||h,M=m?Array(d):[];let _;for(;(_=e.indexOf(t,g))>-1;){let e=y(t,{currentLocation:_,expectedLocation:u,distance:i,ignoreLocation:a});if(p=Math.min(e,p),g=_+l,m){let e=0;for(;e<l;)M[_+e]=1,e+=1}}g=-1;let L=[],x=1,k=l+d;const w=1<<l-1;for(let r=0;r<l;r+=1){let s=0,c=k;for(;s<c;){y(t,{errors:r,currentLocation:u+c,expectedLocation:u,distance:i,ignoreLocation:a})<=p?s=c:k=c,c=Math.floor((k-s)/2+s)}k=c;let h=Math.max(1,u-c+1),f=o?d:Math.min(u+c,d)+l,v=Array(f+2);v[f+1]=(1<<r)-1;for(let s=f;s>=h;s-=1){let o=s-1,c=n[e.charAt(o)];if(m&&(M[o]=+!!c),v[s]=(v[s+1]<<1|1)&c,r&&(v[s]|=(L[s+1]|L[s])<<1|1|L[s+1]),v[s]&w&&(x=y(t,{errors:r,currentLocation:o,expectedLocation:u,distance:i,ignoreLocation:a}),x<=p)){if(p=x,g=o,g<=u)break;h=Math.max(1,2*u-g)}}if(y(t,{errors:r+1,currentLocation:u,expectedLocation:u,distance:i,ignoreLocation:a})>p)break;L=v}const E={isMatch:g>=0,score:Math.max(.001,x)};if(m){const e=function(e=[],t=f.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let o=e[s];o&&-1===r?r=s:o||-1===r||(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}(M,c);e.length?h&&(E.indices=e):E.isMatch=!1}return E}function _(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}class L{constructor(e,{location:t=f.location,threshold:n=f.threshold,distance:r=f.distance,includeMatches:i=f.includeMatches,findAllMatches:s=f.findAllMatches,minMatchCharLength:o=f.minMatchCharLength,isCaseSensitive:c=f.isCaseSensitive,ignoreLocation:h=f.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:h},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(e,t)=>{this.chunks.push({pattern:e,alphabet:_(e),startIndex:t})},l=this.pattern.length;if(l>v){let e=0;const t=l%v,n=l-t;for(;e<n;)a(this.pattern.substr(e,v),e),e+=v;if(t){const e=l-v;a(this.pattern.substr(e),e)}}else a(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:r,distance:i,threshold:s,findAllMatches:o,minMatchCharLength:c,ignoreLocation:h}=this.options;let a=[],l=0,d=!1;this.chunks.forEach((({pattern:t,alphabet:u,startIndex:f})=>{const{isMatch:p,score:g,indices:m}=M(e,t,u,{location:r+f,distance:i,threshold:s,findAllMatches:o,minMatchCharLength:c,includeMatches:n,ignoreLocation:h});p&&(d=!0),l+=g,p&&m&&(a=[...a,...m])}));let u={isMatch:d,score:d?l/this.chunks.length:1};return d&&n&&(u.indices=a),u}}const x=[];function k(e,t){for(let n=0,r=x.length;n<r;n+=1){let r=x[n];if(r.condition(e,t))return new r(e,t)}return new L(e,t)}const w="$and",E="$or",I="$path",b="$val",S=e=>!(!e[w]&&!e[E]),A=e=>({[w]:Object.keys(e).map((t=>({[t]:e[t]})))});function C(e,t){const n=e.matches;t.matches=[],s(n)&&n.forEach((e=>{if(!s(e.indices)||!e.indices.length)return;const{indices:n,value:r}=e;let i={indices:n,value:r};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function N(e,t){t.score=e.score}class F{constructor(e,t={},n){if(this.options={...f,...t},this.options.useExtendedSearch)throw new Error("Extended search is not available");this._keyStore=new a(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof g))throw new Error("Incorrect 'index' type");this._myIndex=t||m(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){s(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:i,includeScore:s,shouldSort:o,sortFn:c,ignoreFieldNorm:h}=this.options;let a=t(e)?t(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=f.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:r,score:i})=>{const s=e?e.weight:null;n*=Math.pow(0===i&&s?Number.EPSILON:i,(s||1)*(t?1:r))})),e.score=n}))}(a,{ignoreFieldNorm:h}),o&&a.sort(c),n(r)&&r>-1&&(a=a.slice(0,r)),function(e,t,{includeMatches:n=f.includeMatches,includeScore:r=f.includeScore}={}){const i=[];return n&&i.push(C),r&&i.push(N),e.map((e=>{const{idx:n}=e,r={item:t[n],refIndex:n};return i.length&&i.forEach((t=>{t(e,r)})),r}))}(a,this._docs,{includeMatches:i,includeScore:s})}_searchStringList(e){const t=k(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:e,i:n,n:i})=>{if(!s(e))return;const{isMatch:o,score:c,indices:h}=t.searchIn(e);o&&r.push({item:e,idx:n,matches:[{score:c,value:e,norm:i,indices:h}]})})),r}_searchLogical(e){throw new Error("Logical search is not available")}_searchObjectList(e){const t=k(e,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach((({$:e,i:r})=>{if(!s(e))return;let o=[];n.forEach(((n,r)=>{o.push(...this._findMatches({key:n,value:e[r],searcher:t}))})),o.length&&i.push({idx:r,item:e,matches:o})})),i}_findMatches({key:t,value:n,searcher:r}){if(!s(n))return[];let i=[];if(e(n))n.forEach((({v:e,i:n,n:o})=>{if(!s(e))return;const{isMatch:c,score:h,indices:a}=r.searchIn(e);c&&i.push({score:h,key:t,value:e,idx:n,norm:o,indices:a})}));else{const{v:e,n:s}=n,{isMatch:o,score:c,indices:h}=r.searchIn(e);o&&i.push({score:c,key:t,value:e,norm:s,indices:h})}return i}}function O(e){return e?Object.getOwnPropertyNames(e):[]}F.version="6.5.3",F.createIndex=m,F.parseIndex=function(e,{getFn:t=f.getFn,fieldNormWeight:n=f.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new g({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s},F.config=f,F.parseQuery=function(n,r,{auto:s=!0}={}){const o=n=>{let c=Object.keys(n);const h=(e=>!!e[I])(n);if(!h&&c.length>1&&!S(n))return o(A(n));if((t=>!e(t)&&i(t)&&!S(t))(n)){const e=h?n[I]:c[0],i=h?n[b]:n[e];if(!t(i))throw new Error((e=>`Invalid value for key ${e}`)(e));const o={keyId:u(e),pattern:i};return s&&(o.searcher=k(i,r)),o}let a={children:[],operator:c[0]};return c.forEach((t=>{const r=n[t];e(r)&&r.forEach((e=>{a.children.push(o(e))}))})),a};return S(n)||(n=A(n)),o(n)};function j(e){return Array.isArray(e)||(e=O(e)),0===e.length}var $,W=(e,t)=>{var n,r=[];for(n in e)if(e.hasOwnProperty(n)){var i=t?t+"["+n+"]":n,s=e[n];r.push(null!==s&&"object"==typeof s?serialize(s,i):encodeURIComponent(i)+"="+encodeURIComponent(s))}return r.join("&")};function P(e,t,n,r,i,s,o){try{var c=e[s](o),h=c.value}catch(e){return void n(e)}c.done?t(h):Promise.resolve(h).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){P(s,r,i,o,c,"next",e)}function c(e){P(s,r,i,o,c,"throw",e)}o(void 0)}))}}function B(){return H.apply(this,arguments)}function H(){return H=T((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r={method:n,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"},credentials:"same-origin"};"GET"==n||"HEAD"==n||j(t)||(r.body=W(t));var i=yield fetch(e,r);return i})),H.apply(this,arguments)}function R(){return R=T((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r=yield B(e,t,n);return r.json()})),R.apply(this,arguments)}function z(e,t,n,r){var i,s=document.createElement(t);s.setAttribute("id",n),(i=r)instanceof Element||i instanceof HTMLDocument?s.appendChild(r):s.innerHTML=r,e.appendChild(s)}function J(e,t){var n,r,i,s=function(){var e,t="wppedia_results_rendered";return document.getElementById(t)?e=document.getElementById(t):(e=document.createElement("ul")).id=t,e}();(n=s,(r=t).parentNode.insertBefore(n,r.nextSibling),s.innerHTML="",!1!==e)?Array.prototype.forEach.call(e,(e=>{var t=e.item,n=document.createElement("a");n.href=t.url,n.tabIndex=0,n.innerHTML=t.post_title,z(s,"li","res_id_"+t.post_id,n)})):(i=s).parentNode.removeChild(i)}(function(){return R.apply(this,arguments)})(wppedia_search_props.postlist_url,{},"GET").then((e=>{$=e}));var K=document.getElementById(wppedia_search_props.searchinput_id);if(K){["keyup","focus","click","search"].forEach((e=>{K.addEventListener(e,(e=>{var t=e.target,n=function(e,t){if(void 0===e||""==e||void 0===$)return!1;var n=JSON.parse(t),r=F.createIndex(n.keys,$),i=new F($,n,r).search(e,{limit:15});return!j(i)&&i}(t.value,wppedia_search_props.search_options);J(n,t.form.lastChild)}))})),document.addEventListener("click",(function(e){K.parentElement.contains(e.target)||J(!1,document.body)}))}}();